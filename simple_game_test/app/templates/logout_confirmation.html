{% extends "base.html" %} 

{% block content %}
<div class="jumbotron jumbotron-fluid">
    <div class="container text-center">
        <div class="card">
            <div class="card-body text-center">
                <h1 class="card-title" id="logout-header">Logged Out</h1>
                <p class="card-text" id="logout-message">
                    You have been logged out due to inactivity. Please contact the research team if you believe this is an error.
                </p>
            </div>
        </div>
    </div>
</div>


<script>
    // Function to dynamically update the logout message based on URL parameter
    function updateLogoutMessage() {
        // Parse the URL search parameters
        const params = new URLSearchParams(window.location.search);

        // Check if the 'reason' parameter exists
        if (params.has('reason')) {
            const reason = params.get('reason');
            const messageElement = document.getElementById('logout-message');

            // Update the message dynamically based on the reason
            switch (reason) {
                case 'complete':
                    messageElement.textContent = "Thank you for your participation! You have successfully logged out.";
                    break;
                case 'inactivity':
                    messageElement.textContent = "You were logged out due to inactivity. Please contact the research team if this was unexpected.";
                    break;
                case 'disconnected':
                    messageElement.textContent = "You were disconnected. If you think this is a mistake, please contact the research team.";
                    break;
                default:
                    messageElement.textContent = "Thank you for your participation! You have successfully logged out.";
            }
        }
    }

    // Call the function on page load
    document.addEventListener('DOMContentLoaded', updateLogoutMessage);
</script>


<!-- <script>
    function getQueryParam(param) {
        let urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    function updateLogoutMessage() {
        let reason = getQueryParam("reason");
        console.log("Logout reason received:", reason);  // Debugging log

        const messageElement = document.getElementById('logout-message');

        switch (reason) {
            case 'complete':
                messageElement.textContent = "Thank you for your participation! You have successfully logged out.";
                break;
            case 'inactivity':
                messageElement.textContent = "You were logged out due to inactivity. Please contact the research team if this was unexpected.";
                break;
            case 'disconnected':
                messageElement.textContent = "You were disconnected. If you think this is a mistake, please contact the research team.";
                break;
            default:
                messageElement.textContent = "You have been logged out. If this was unexpected, please contact the research team.";
        }
    }

    document.addEventListener('DOMContentLoaded', updateLogoutMessage);
</script> -->

{% endblock %}
