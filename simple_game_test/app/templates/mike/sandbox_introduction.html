<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdn.socket.io/4.6.0/socket.io.min.js" 
        integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+" 
        crossorigin="anonymous"></script>

<!-- // Corrected static module import
<script type="module">
  import socket from "/static/lib/socket.js";
  console.log(socket);
  window.socket = socket;
</script> -->

<script>
  function make_sandbox() {
    console.log("I am getting called!")
    var socket = io();

    // Print the socket connection details
    socket.on('connect', function () {
        console.log('Socket connected!');
        console.log('Socket URL:', socket.io.uri);
        console.log('Socket path:', socket.io.opts.path);
    });

    socket.emit('make sandbox', {version: 1});
    socket.on('made sandbox', function() {
      console.log('Next url from sandbox 1: ', "{{ url_for('sandbox') }}");
      localStorage.setItem("progress", "sandbox_1");
      window.location.assign("{{ url_for('sandbox') }}");
    });
  };
</script>

{% extends "base.html" %}

{% block content %}

<!-- Corrected CSS static path -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css" />

<div id="container-instructions" class="text-center">

<h2>Welcome to the practice game!</h2>
    <hr />

    <p> All games will consist of <b>locations </b> (e.g. 
        <img src="{{ url_for('static', filename='img/star.png') }}" width="20" height="auto" /> in this practice game), 
        <b>objects that you can pick up and drop</b> (e.g. 
        <img src="{{ url_for('static', filename='img/pentagon.png') }}" width="20" height="auto" />), 
        <b>objects that you can move through</b> (e.g. 
        <img src="{{ url_for('static', filename='img/diamond.png') }}" width="20" height="auto" />), and 
        <b>walls </b> that you can't move through (
        <img src="{{ url_for('static', filename='img/wall.png') }}" width="20" height="auto" />).
    </p>

    <p> Each game will have <b>multiple possible configurations </b> (like the two below).</p> 
    <br>

    <!-- Corrected image paths -->
    <img src="{{ url_for('static', filename='img/sandbox_updated1.png') }}" width="300" height="auto" hspace="20" />
    <img src="{{ url_for('static', filename='img/sandbox_updated2.png') }}" width="300" height="auto" />

    <br><br><br>

    <p>Each game will have a <b>task that you must complete</b> while <b>minimizing your energy loss</b>. In this game, the task is the following:</p>

    <table class="center">
      <tr>
        <th>Task</th>
        <th>Sample sequence</th>
      </tr>
      <tr>
        <td>Dropping off the green pentagon at the purple star</td>
        <td>
            <img src="{{ url_for('static', filename='img/sandbox_dropoff1.png') }}" width="75" height="auto" />
            <img src="{{ url_for('static', filename='img/arrow.png') }}" width="30" height="auto" />
            <img src="{{ url_for('static', filename='img/sandbox_dropoff2.png') }}" width="75" height="auto" />
        </td>
      </tr>
    </table>

    <hr />

    <div class="instructionsnav">
      <div class="row justify-content-between">
          <div class="col-xs-3">
            <button type="button" id="prev" 
                    onclick="window.location.href='{{ url_for('overview') }}'" 
                    value="previous" class="btn btn-primary btn-lg continue">
                Previous <span class="glyphicon glyphicon-arrow-left"></span>
            </button>
          </div>
          <div class="col-xs-3">
            <button type="button" id="next" 
                    onclick="make_sandbox()"
                    value="next" class="btn btn-primary btn-lg continue">
                Next <span class="glyphicon glyphicon-arrow-right"></span>
            </button>
          </div>
      </div>
    </div>

</div>

{% endblock %}
